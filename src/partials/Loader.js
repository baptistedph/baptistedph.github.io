import { useEffect } from 'react'
import styled from 'styled-components'

const Loader = ({ styles, load, animate }) => {
  useEffect(() => {
    return () => window.localStorage.setItem('bdph-loader', 'true')
  }, [])

  return (
    <LoaderContainer
      padding={`${styles.paddings.p4} ${styles.paddings.p1}`}
      background={styles.colors.background}
      load={load}
      animate={animate}>
      <Logo viewBox="0 0 95 40" fillColor={styles.colors.text}>
        <path
          id="path"
          d="M6.92 4.74C8.29333 4.74 9.46667 5.24667 10.44 6.26C11.4133 7.27333 11.9 8.52 11.9 10C11.9 11.4667 11.4133 12.7133 10.44 13.74C9.46667 14.7533 8.29333 15.26 6.92 15.26C5.4 15.26 4.23333 14.6933 3.42 13.56V15H1.26V0.999999H3.42V6.42C4.23333 5.3 5.4 4.74 6.92 4.74ZM4.32 12.3C4.92 12.9 5.67333 13.2 6.58 13.2C7.48667 13.2 8.24 12.9 8.84 12.3C9.44 11.6867 9.74 10.92 9.74 10C9.74 9.08 9.44 8.32 8.84 7.72C8.24 7.10667 7.48667 6.8 6.58 6.8C5.67333 6.8 4.92 7.10667 4.32 7.72C3.72 8.32 3.42 9.08 3.42 10C3.42 10.92 3.72 11.6867 4.32 12.3ZM21.7777 5H23.9377V15H21.7777V13.56C20.9643 14.6933 19.7977 15.26 18.2777 15.26C16.9043 15.26 15.731 14.7533 14.7577 13.74C13.7843 12.7133 13.2977 11.4667 13.2977 10C13.2977 8.52 13.7843 7.27333 14.7577 6.26C15.731 5.24667 16.9043 4.74 18.2777 4.74C19.7977 4.74 20.9643 5.3 21.7777 6.42V5ZM16.3577 12.3C16.9577 12.9 17.711 13.2 18.6177 13.2C19.5243 13.2 20.2777 12.9 20.8777 12.3C21.4777 11.6867 21.7777 10.92 21.7777 10C21.7777 9.08 21.4777 8.32 20.8777 7.72C20.2777 7.10667 19.5243 6.8 18.6177 6.8C17.711 6.8 16.9577 7.10667 16.3577 7.72C15.7577 8.32 15.4577 9.08 15.4577 10C15.4577 10.92 15.7577 11.6867 16.3577 12.3ZM32.1153 4.74C33.4886 4.74 34.662 5.25333 35.6353 6.28C36.6086 7.29333 37.0953 8.53333 37.0953 10C37.0953 11.48 36.6086 12.7267 35.6353 13.74C34.662 14.7533 33.4886 15.26 32.1153 15.26C30.5953 15.26 29.4286 14.7 28.6153 13.58V19H26.4553V5H28.6153V6.44C29.4286 5.30667 30.5953 4.74 32.1153 4.74ZM29.5153 12.3C30.1153 12.9 30.8686 13.2 31.7753 13.2C32.682 13.2 33.4353 12.9 34.0353 12.3C34.6353 11.6867 34.9353 10.92 34.9353 10C34.9353 9.08 34.6353 8.32 34.0353 7.72C33.4353 7.10667 32.682 6.8 31.7753 6.8C30.8686 6.8 30.1153 7.10667 29.5153 7.72C28.9153 8.32 28.6153 9.08 28.6153 10C28.6153 10.92 28.9153 11.6867 29.5153 12.3ZM44.4377 7.08H41.9577V11.88C41.9577 12.2933 42.051 12.5933 42.2377 12.78C42.4243 12.9533 42.6977 13.0533 43.0577 13.08C43.431 13.0933 43.891 13.0867 44.4377 13.06V15C42.7843 15.2 41.5977 15.06 40.8777 14.58C40.1577 14.0867 39.7977 13.1867 39.7977 11.88V7.08H37.9577V5H39.7977V2.84L41.9577 2.2V5H44.4377V7.08ZM48.4367 3.1C48.1701 3.36667 47.8501 3.5 47.4767 3.5C47.1034 3.5 46.7767 3.36667 46.4967 3.1C46.2301 2.82 46.0967 2.49333 46.0967 2.12C46.0967 1.74667 46.2301 1.42667 46.4967 1.16C46.7634 0.879999 47.0901 0.739999 47.4767 0.739999C47.8634 0.739999 48.1901 0.879999 48.4567 1.16C48.7234 1.42667 48.8567 1.74667 48.8567 2.12C48.8567 2.49333 48.7167 2.82 48.4367 3.1ZM46.3967 15V5H48.5567V15H46.3967ZM52.9461 7.76C52.9461 8.09333 53.1261 8.36 53.4861 8.56C53.8594 8.74667 54.3061 8.91333 54.8261 9.06C55.3594 9.19333 55.8928 9.35333 56.4261 9.54C56.9594 9.72667 57.4061 10.0467 57.7661 10.5C58.1394 10.94 58.3261 11.5 58.3261 12.18C58.3261 13.14 57.9528 13.8933 57.2061 14.44C56.4728 14.9867 55.5461 15.26 54.4261 15.26C53.4394 15.26 52.5928 15.0533 51.8861 14.64C51.1794 14.2267 50.6661 13.6533 50.3461 12.92L52.2061 11.84C52.5528 12.8 53.2928 13.28 54.4261 13.28C55.5594 13.28 56.1261 12.9067 56.1261 12.16C56.1261 11.84 55.9394 11.58 55.5661 11.38C55.2061 11.18 54.7594 11.0133 54.2261 10.88C53.7061 10.7333 53.1794 10.5667 52.6461 10.38C52.1128 10.1933 51.6594 9.88667 51.2861 9.46C50.9261 9.02 50.7461 8.46667 50.7461 7.8C50.7461 6.88 51.0928 6.14 51.7861 5.58C52.4928 5.02 53.3661 4.74 54.4061 4.74C55.2328 4.74 55.9661 4.92667 56.6061 5.3C57.2594 5.66 57.7594 6.16667 58.1061 6.82L56.2861 7.84C55.9394 7.08 55.3128 6.7 54.4061 6.7C53.9928 6.7 53.6461 6.79333 53.3661 6.98C53.0861 7.15333 52.9461 7.41333 52.9461 7.76ZM65.4142 7.08H62.9342V11.88C62.9342 12.2933 63.0276 12.5933 63.2142 12.78C63.4009 12.9533 63.6742 13.0533 64.0342 13.08C64.4076 13.0933 64.8676 13.0867 65.4142 13.06V15C63.7609 15.2 62.5742 15.06 61.8542 14.58C61.1342 14.0867 60.7742 13.1867 60.7742 11.88V7.08H58.9342V5H60.7742V2.84L62.9342 2.2V5H65.4142V7.08ZM68.6631 10.92C68.8231 11.68 69.1898 12.2667 69.7631 12.68C70.3365 13.08 71.0365 13.28 71.8631 13.28C73.0098 13.28 73.8698 12.8667 74.4431 12.04L76.2231 13.08C75.2365 14.5333 73.7765 15.26 71.8431 15.26C70.2165 15.26 68.9031 14.7667 67.9031 13.78C66.9031 12.78 66.4031 11.52 66.4031 10C66.4031 8.50667 66.8965 7.26 67.8831 6.26C68.8698 5.24667 70.1365 4.74 71.6831 4.74C73.1498 4.74 74.3498 5.25333 75.2831 6.28C76.2298 7.30667 76.7031 8.55333 76.7031 10.02C76.7031 10.2467 76.6765 10.5467 76.6231 10.92H68.6631ZM68.6431 9.16H74.5231C74.3765 8.34667 74.0365 7.73333 73.5031 7.32C72.9831 6.90667 72.3698 6.7 71.6631 6.7C70.8631 6.7 70.1965 6.92 69.6631 7.36C69.1298 7.8 68.7898 8.4 68.6431 9.16ZM9.18 21H11.34V35H9.18V33.56C8.36667 34.6933 7.2 35.26 5.68 35.26C4.30667 35.26 3.13333 34.7533 2.16 33.74C1.18667 32.7133 0.7 31.4667 0.7 30C0.7 28.52 1.18667 27.2733 2.16 26.26C3.13333 25.2467 4.30667 24.74 5.68 24.74C7.2 24.74 8.36667 25.3 9.18 26.42V21ZM3.76 32.3C4.36 32.9 5.11333 33.2 6.02 33.2C6.92667 33.2 7.68 32.9 8.28 32.3C8.88 31.6867 9.18 30.92 9.18 30C9.18 29.08 8.88 28.32 8.28 27.72C7.68 27.1067 6.92667 26.8 6.02 26.8C5.11333 26.8 4.36 27.1067 3.76 27.72C3.16 28.32 2.86 29.08 2.86 30C2.86 30.92 3.16 31.6867 3.76 32.3ZM21.7777 25H23.9377V35H21.7777V33.56C20.9643 34.6933 19.7977 35.26 18.2777 35.26C16.9043 35.26 15.731 34.7533 14.7577 33.74C13.7843 32.7133 13.2977 31.4667 13.2977 30C13.2977 28.52 13.7843 27.2733 14.7577 26.26C15.731 25.2467 16.9043 24.74 18.2777 24.74C19.7977 24.74 20.9643 25.3 21.7777 26.42V25ZM16.3577 32.3C16.9577 32.9 17.711 33.2 18.6177 33.2C19.5243 33.2 20.2777 32.9 20.8777 32.3C21.4777 31.6867 21.7777 30.92 21.7777 30C21.7777 29.08 21.4777 28.32 20.8777 27.72C20.2777 27.1067 19.5243 26.8 18.6177 26.8C17.711 26.8 16.9577 27.1067 16.3577 27.72C15.7577 28.32 15.4577 29.08 15.4577 30C15.4577 30.92 15.7577 31.6867 16.3577 32.3ZM33.1953 25H35.3553V35H33.1953V33.72C32.542 34.7467 31.5086 35.26 30.0953 35.26C28.9486 35.26 28.022 34.8933 27.3153 34.16C26.6086 33.4267 26.2553 32.42 26.2553 31.14V25H28.4153V30.92C28.4153 31.6667 28.6153 32.24 29.0153 32.64C29.4153 33.04 29.962 33.24 30.6553 33.24C31.4153 33.24 32.0286 33.0067 32.4953 32.54C32.962 32.06 33.1953 31.3333 33.1953 30.36V25ZM43.5411 24.74C44.9144 24.74 46.0878 25.2533 47.0611 26.28C48.0344 27.2933 48.5211 28.5333 48.5211 30C48.5211 31.48 48.0344 32.7267 47.0611 33.74C46.0878 34.7533 44.9144 35.26 43.5411 35.26C42.0211 35.26 40.8544 34.7 40.0411 33.58V39H37.8811V25H40.0411V26.44C40.8544 25.3067 42.0211 24.74 43.5411 24.74ZM40.9411 32.3C41.5411 32.9 42.2944 33.2 43.2011 33.2C44.1078 33.2 44.8611 32.9 45.4611 32.3C46.0611 31.6867 46.3611 30.92 46.3611 30C46.3611 29.08 46.0611 28.32 45.4611 27.72C44.8611 27.1067 44.1078 26.8 43.2011 26.8C42.2944 26.8 41.5411 27.1067 40.9411 27.72C40.3411 28.32 40.0411 29.08 40.0411 30C40.0411 30.92 40.3411 31.6867 40.9411 32.3ZM55.7388 24.74C56.8854 24.74 57.8121 25.1067 58.5188 25.84C59.2254 26.5733 59.5788 27.58 59.5788 28.86V35H57.4188V29.08C57.4188 28.3333 57.2188 27.76 56.8188 27.36C56.4188 26.96 55.8721 26.76 55.1788 26.76C54.4188 26.76 53.8054 27 53.3388 27.48C52.8721 27.9467 52.6388 28.6667 52.6388 29.64V35H50.4788V21H52.6388V26.28C53.2921 25.2533 54.3254 24.74 55.7388 24.74ZM66.6245 35.26C65.1579 35.26 63.9112 34.7533 62.8845 33.74C61.8579 32.7267 61.3445 31.48 61.3445 30C61.3445 28.52 61.8579 27.2733 62.8845 26.26C63.9112 25.2467 65.1579 24.74 66.6245 24.74C68.1045 24.74 69.3512 25.2467 70.3645 26.26C71.3912 27.2733 71.9045 28.52 71.9045 30C71.9045 31.48 71.3912 32.7267 70.3645 33.74C69.3512 34.7533 68.1045 35.26 66.6245 35.26ZM64.4045 32.26C65.0045 32.86 65.7445 33.16 66.6245 33.16C67.5045 33.16 68.2445 32.86 68.8445 32.26C69.4445 31.66 69.7445 30.9067 69.7445 30C69.7445 29.0933 69.4445 28.34 68.8445 27.74C68.2445 27.14 67.5045 26.84 66.6245 26.84C65.7445 26.84 65.0045 27.14 64.4045 27.74C63.8045 28.34 63.5045 29.0933 63.5045 30C63.5045 30.9067 63.8045 31.66 64.4045 32.26ZM80.5977 25H82.7577V35H80.5977V33.72C79.9443 34.7467 78.911 35.26 77.4977 35.26C76.351 35.26 75.4243 34.8933 74.7177 34.16C74.011 33.4267 73.6577 32.42 73.6577 31.14V25H75.8177V30.92C75.8177 31.6667 76.0177 32.24 76.4177 32.64C76.8177 33.04 77.3643 33.24 78.0577 33.24C78.8177 33.24 79.431 33.0067 79.8977 32.54C80.3643 32.06 80.5977 31.3333 80.5977 30.36V25ZM92.0234 25H94.3234L90.4834 35.32C89.5234 37.9067 87.8968 39.1333 85.6034 39V36.98C86.2834 37.02 86.8301 36.8733 87.2434 36.54C87.6568 36.22 87.9968 35.7133 88.2634 35.02L88.3634 34.82L84.1234 25H86.4834L89.4634 32.26L92.0234 25Z"
          fill="transparent"
          strokeWidth="0.5"
          stroke={styles.colors.text}
        />
      </Logo>
    </LoaderContainer>
  )
}

const LoaderContainer = styled.div`
  position: fixed;
  z-index: 100;
  width: 100%;
  height: 100%;
  background: ${props => props.background};
  padding: ${props => props.padding};
  display: flex;
  align-items: center;
  justify-content: center;
  visibility: ${props => (props.load && !props.animate ? 'hidden' : 'visible')};
  opacity: ${props => (props.load && !props.animate ? 0 : 1)};
  transition: opacity 0.5s, visibility 0s 0.5s;
`

const Logo = styled.svg`
  width: 150px;
  animation: line 30s linear forwards;

  & path {
    animation: fill 1s ease-in 1.5s forwards;
  }

  @keyframes line {
    from {
      stroke-dasharray: 904;
      stroke-dashoffset: 904;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  @keyframes fill {
    from {
      fill: transparent;
    }
    to {
      fill: ${props => props.fillColor};
    }
  }
`

export default Loader
